{
  "pluginAlias": "AhoyDTU",
  "pluginType": "platform",
  "singular": true,
  "customUi": false,
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Platform Name",
        "type": "string",
        "default": "AHOY-DTU Solar",
        "description": "Name der AHOY-DTU Platform"
      },
      "mqtt": {
        "title": "MQTT-Konfiguration",
        "type": "object",
        "properties": {
          "host": {
            "title": "MQTT-Broker IP-Adresse",
            "type": "string",
            "format": "ipv4",
            "required": true,
            "description": "IP-Adresse des MQTT-Brokers (z.B. AHOY-DTU Gerät)"
          },
          "port": {
            "title": "MQTT-Port",
            "type": "integer",
            "minimum": 1,
            "maximum": 65535,
            "default": 1883,
            "description": "Port des MQTT-Brokers"
          },
          "username": {
            "title": "MQTT-Benutzername",
            "type": "string",
            "required": true,
            "description": "Benutzername für die MQTT-Verbindung"
          },
          "password": {
            "title": "MQTT-Passwort",
            "type": "string",
            "required": true,
            "description": "Passwort für die MQTT-Verbindung"
          },
          "clientId": {
            "title": "MQTT-Client-ID",
            "type": "string",
            "default": "homebridge-ahoy-dtu",
            "description": "Eindeutige Client-ID für MQTT-Verbindung"
          }
        },
        "required": ["host", "username", "password"]
      },
      "discoverDevices": {
        "title": "Geräte automatisch entdecken",
        "type": "boolean",
        "default": true,
        "description": "AHOY-DTU Geräte automatisch über MQTT-Topics entdecken"
      },
      "offlineThresholdMinutes": {
        "title": "Offline-Schwellenwert (Minuten)",
        "type": "integer",
        "minimum": 1,
        "maximum": 60,
        "default": 5,
        "description": "Nach wie vielen Minuten ohne Daten wird ein Gerät als offline markiert"
      },
      "language": {
        "title": "Sprache",
        "type": "string",
        "enum": ["de", "en", "fr", "it"],
        "default": "de",
        "description": "Sprache für Logs und Benutzeroberfläche"
      },
      "sensors": {
        "title": "HomeKit-Sensoren",
        "type": "object",
        "properties": {
          "power": {
            "title": "Solarproduktion (Watt)",
            "type": "boolean",
            "default": true,
            "description": "Aktuelle Solarleistung als LightSensor"
          },
          "energyToday": {
            "title": "Tagesenergie (kWh)",
            "type": "boolean",
            "default": true,
            "description": "Tägliche Energieerzeugung als LightSensor"
          },
          "temperature": {
            "title": "Temperatur (°C)",
            "type": "boolean",
            "default": true,
            "description": "Wechselrichter-Temperatur als TemperatureSensor"
          },
          "status": {
            "title": "Online-Status",
            "type": "boolean",
            "default": true,
            "description": "Online/Offline-Status als ContactSensor"
          },
          "voltage": {
            "title": "DC-Spannung (V)",
            "type": "boolean",
            "default": false,
            "description": "DC-Spannung als LightSensor"
          },
          "current": {
            "title": "DC-Strom (A)",
            "type": "boolean",
            "default": false,
            "description": "DC-Strom als LightSensor"
          },
          "efficiency": {
            "title": "Effizienz (%)",
            "type": "boolean",
            "default": false,
            "description": "Wechselrichter-Effizienz als LightSensor"
          },
          "frequency": {
            "title": "Netzfrequenz (Hz)",
            "type": "boolean",
            "default": false,
            "description": "Netzfrequenz als LightSensor"
          },
          "rssi": {
            "title": "Signalstärke (dBm)",
            "type": "boolean",
            "default": false,
            "description": "WiFi-Signalstärke als LightSensor"
          },
          "producing": {
            "title": "Produktionsstatus",
            "type": "boolean",
            "default": false,
            "description": "Aktiver Produktionsstatus als MotionSensor"
          }
        }
      },
      "customNames": {
        "title": "Benutzerdefinierte Sensornamen",
        "type": "object",
        "properties": {
          "power": {
            "title": "Solarproduktion Name",
            "type": "string",
            "default": "Solarproduktion",
            "description": "Benutzerdefinierter Name für Solarproduktion"
          },
          "energyToday": {
            "title": "Tagesenergie Name",
            "type": "string",
            "default": "Tagesenergie",
            "description": "Benutzerdefinierter Name für Tagesenergie"
          },
          "temperature": {
            "title": "Temperatur Name",
            "type": "string",
            "default": "Temperatur",
            "description": "Benutzerdefinierter Name für Temperatur"
          },
          "status": {
            "title": "Status Name",
            "type": "string",
            "default": "Status",
            "description": "Benutzerdefinierter Name für Online-Status"
          },
          "voltage": {
            "title": "Spannung Name",
            "type": "string",
            "default": "Spannung",
            "description": "Benutzerdefinierter Name für DC-Spannung"
          },
          "current": {
            "title": "Strom Name",
            "type": "string",
            "default": "Strom",
            "description": "Benutzerdefinierter Name für DC-Strom"
          },
          "efficiency": {
            "title": "Effizienz Name",
            "type": "string",
            "default": "Effizienz",
            "description": "Benutzerdefinierter Name für Effizienz"
          },
          "frequency": {
            "title": "Frequenz Name",
            "type": "string",
            "default": "Frequenz",
            "description": "Benutzerdefinierter Name für Netzfrequenz"
          },
          "rssi": {
            "title": "Signalstärke Name",
            "type": "string",
            "default": "Signalstärke",
            "description": "Benutzerdefinierter Name für Signalstärke"
          },
          "producing": {
            "title": "Produktion Name",
            "type": "string",
            "default": "Produktion",
            "description": "Benutzerdefinierter Name für Produktionsstatus"
          }
        }
      },
      "dataStorage": {
        "title": "Datenspeicherung",
        "type": "object",
        "properties": {
          "enabled": {
            "title": "Historische Daten speichern",
            "type": "boolean",
            "default": true,
            "description": "Aktiviert die Speicherung historischer Daten"
          },
          "retentionHours": {
            "title": "Speicherdauer (Stunden)",
            "type": "integer",
            "minimum": 1,
            "maximum": 168,
            "default": 24,
            "description": "Wie lange Daten im Speicher gehalten werden (1-168h = 1 Woche)"
          },
          "samplingInterval": {
            "title": "Sampling-Intervall (Minuten)",
            "type": "integer",
            "minimum": 1,
            "maximum": 60,
            "default": 5,
            "description": "Intervall für Datensammlung (1-60 Minuten)"
          },
          "compressionEnabled": {
            "title": "Datenkomprimierung",
            "type": "boolean",
            "default": true,
            "description": "Komprimiert alte Daten für sparsame Speicherung"
          }
        }
      },
      "webInterface": {
        "title": "Web-Interface",
        "type": "object",
        "properties": {
          "enabled": {
            "title": "Web-Interface aktivieren",
            "type": "boolean",
            "default": true,
            "description": "Aktiviert das Web-Dashboard für Monitoring"
          },
          "port": {
            "title": "Web-Interface Port",
            "type": "integer",
            "minimum": 1000,
            "maximum": 65535,
            "default": 8080,
            "description": "Port für das Web-Interface"
          },
          "refreshInterval": {
            "title": "Aktualisierungsintervall (Sekunden)",
            "type": "integer",
            "minimum": 1,
            "maximum": 60,
            "default": 5,
            "description": "Intervall für Live-Updates im Web-Interface"
          }
        }
      },
      "childBridge": {
        "title": "Child Bridge",
        "type": "object",
        "properties": {
          "enabled": {
            "title": "Child Bridge aktivieren",
            "type": "boolean",
            "default": false,
            "description": "Plugin in separatem Prozess ausführen für bessere Stabilität"
          },
          "port": {
            "title": "Child Bridge Port",
            "type": "integer",
            "minimum": 8000,
            "maximum": 65535,
            "default": 8582,
            "description": "Port für die Child Bridge (nur wenn aktiviert)"
          }
        }
      },
      "debug": {
        "title": "Debug-Modus",
        "type": "boolean",
        "default": false,
        "description": "Ausführliche Logs für Fehlerbehebung aktivieren"
      }
    },
    "required": ["mqtt"]
  }
}